---

title: Jekyll å†™ä½œâœï¸
author: hoochanlon
categories: [2021,Blogging, Jekyll]
tags: [åšå®¢é…ç½®å­˜æ¡£]
math: true
mermaid: true
date: 2021-04-02 10:22:04

---


## rake

Jekyllåšå®¢æ–‡ä»¶æ ¼å¼ http://jekyllcn.com/docs/posts/ `å¹´-æœˆ-æ—¥-æ ‡é¢˜.MARKUP` ä¸­æ–‡å‘½åéœ€è¦utf-8ç¼–ç ï¼Œè€Œrakeæ˜¯å†…éƒ¨ç¼–ç é—®é¢˜ä¸æ”¯æŒä¸­æ–‡ï¼Œåªå¥½å°†å°±ç”¨rakeç”Ÿæˆå®Œæ–‡ç« å†æ¥å‘½åã€‚

ç”±äºJekyllå¯¹mdæ ‡é¢˜ã€yamlæ ¼å¼è¦æ±‚ä¸¥æ ¼ï¼Œè€Œä¸”æ¯æ¬¡éƒ½å†™yamlæ˜¾å¾—è¿‡äºç¹çï¼Œå› æ­¤ä½¿ç”¨è„šæœ¬è¾“å‡ºå†…å®¹ã€‚

 <!-- more -->

[freehyan-csdn-jekyllJekyll è‡ªåŠ¨ç”Ÿæˆæ–‡ç« ](https://blog.csdn.net/freehyan/article/details/51879554)

`gem list rake`æŸ¥çœ‹æ˜¯å¦æœ‰å®‰è£…rakeï¼Œ`gem install rake`ï¼Œåˆ›å»ºRakefileæ–‡ä»¶ï¼Œå¹¶å°†å¦‚ä¸‹ä»£ç å¤åˆ¶åˆ°è¯¥æ–‡ä»¶ä¸­ï¼Œå†è¿è¡Œ`rake post title="test"`å³å¯å‘å¸ƒæ–‡ç« ã€‚

```ruby
require 'rake'
require 'yaml'

SOURCE = "."
CONFIG = {
  'posts' => File.join(SOURCE, "_posts/#{Time.now().year()}"),
  'post_ext' => "md",
}

# Usage: rake post title="A Title"
desc "Begin a new post in #{CONFIG['posts']}"
task :post do
  abort("rake aborted: '#{CONFIG['posts']}' directory not found.") unless FileTest.directory?(CONFIG['posts'])
  title = ENV["title"] || "new-post"
  slug = title.downcase.strip.gsub(' ', '-').gsub(/[^\w-]/, '')
  filename = File.join(CONFIG['posts'], "#{Time.now.strftime('%Y-%m-%d')}-#{slug}.#{CONFIG['post_ext']}")
  if File.exist?(filename)
    abort("rake aborted!") if ask("#{filename} already exists. Do you want to overwrite?", ['y', 'n']) == 'n'
  end

  puts "Creating new post: #{filename}"
  open(filename, 'w') do |post|
    post.puts "---"
    post.puts "title: \"#{title.gsub(/-/,' ')}\""
    post.puts "date: #{Time.now}"
    post.puts "author: hoochanlon"
     post.puts "category: []"
    post.puts "tags: []"
    post.puts "math: true"
    post.puts "mermaid: true"
    post.puts "image:"
  	post.puts " src:"
    post.puts "---"
  end
end # task :post
```

## æ–‡ç« ç”Ÿæˆä½ç½®å˜æ›´

### _post

è¿™ä¸ªâ€œ_postâ€ç›®å½•æ˜¯å¯ä»¥å†åˆ›å»ºæ–‡ä»¶å¤¹å°†æ–‡ç« æ”¾å…¥çš„ï¼Œä¸å½±å“Jekyll serveéƒ¨ç½²ã€‚è¿™æ ·çš„è¯ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨rakeç›´æ¥åˆ›å»ºä»¥å¹´ä¸ºæ—¶é—´ç‚¹çš„ç›®å½•ï¼Œå°†æ–‡ç« è‡ªåŠ¨æ”¾å…¥å¯¹åº”çš„æ—¶é—´ç‚¹ã€‚

### _site

* [[Jekyll] permalink -- ä¿®æ”¹æ–‡ç« çš„é“¾æ¥åœ°å€](https://www.liangzl.com/get-article-detail-13916.html)
* [jekyllcn.com/docs/permalinks/](http://jekyllcn.com/docs/permalinks/)

`permalink: /posts/:year/:month/:day/:hour-:minute.html`ï¼Œè¿™æ ·å°±å‡å°‘äº†å¦‚ä¸‹çš„æ–‡ç« åŒåå†²çªäº†ã€‚è¿˜èƒ½æŸ¥çœ‹åˆ°åšå®¢æ–‡ç« è¿ç§»å¡«å†™çš„æ—¥æœŸå†²çªã€‚

```
Conflict: The following destination is shared by multiple files.
  The written file may end up with unexpected contents.
    C:/Users/hooch/Desktop/jekyll-theme-chirpy/_site/posts/å‘¨æ—¥/index.html
    - C:/Users/hooch/Desktop/jekyll-theme-chirpy/_posts/2020/2020-3-1-å‘¨æ—¥-ğŸŒ¤.md
    - C:/Users/hooch/Desktop/jekyll-theme-chirpy/_posts/2020/2020-5-3-å‘¨æ—¥-ğŸŒ¤.md
```

## æ–‡ç« å—æ˜¾ç¤º

PS:å†…å®¹æœç´¢æ–¹é¢å¯ä»¥ä½¿ç”¨[jekyll-algolia](https://github.com/algolia/jekyll-algolia)è¿›è¡Œé›†æˆã€‚

### å­—ä½“æ¸²æŸ“

Macæ˜¾ç¤ºçš„`sidebar{font-family:ui-serif}`æ•ˆæœæ˜¯ä¸é”™çš„ï¼Œä½†Windows...ï¼ŒåŸæ¥è¿˜æœ‰`ui-serif`ï¼Œè¿™å›çœ‹ä¸Šå»ä¸é”™äº†ã€‚

* [Macå’ŒWindowså­—ä½“çš„åŒºåˆ«åœ¨å“ªé‡Œï¼Ÿ](https://www.zhihu.com/question/336295967)
* [æœ‰å“ªäº›ä¼˜ç§€çš„è¥¿æ–‡å­—ä½“æ˜¯ Windows å’Œ Mac å…±æœ‰çš„ï¼Ÿ](https://www.zhihu.com/question/25352794)

### read more

[JekyllæŒ‡å—æ–‡ç« æ‘˜è¦éƒ¨åˆ†](http://jekyllcn.com/docs/posts/#%E6%96%87%E7%AB%A0%E6%91%98%E8%A6%81)æŒ‡å‡ºpost.excerptå±æ€§ç”¨äºåšæ–‡ç« å†…å®¹çš„æ–­ç‚¹ï¼Œå¯å¹¶æœªç”Ÿæ•ˆï¼Œæœªç”Ÿæ•ˆçš„åŸå› å‚è€ƒ[jekyll-theme-chirpy/issues/42](https://github.com/cotes2020/jekyll-theme-chirpy/issues/42)ã€‚

äº†è§£æƒ…å†µåæˆ‘ä»¬åšå‡ºäº†å¦‚ä¸‹æ·»åŠ 

```django
{% raw %}
    <div class="post-content">
      <p>
        {% include no-linenos.html content=post.content %}
        <!-- {{ content | markdownify | strip_html | truncate: 200 }} -->
        {{ post.excerpt }}
  </p>
  <a href="{{ post.url }}">Read more â†’</a>
    </div>
{% endraw %}
```

å¯åé¢æ‰€æœ‰æ–‡ç« å®é™…ä¸Šéƒ½æ˜¯è¦åŠ ä¸Š`<!--more-->`ï¼›ä¸ç„¶å°±å…¨éƒ½æ˜¾ç¤ºæˆå…¨æ–‡äº†ï¼Œè¿™æ˜¾ç„¶ä¹Ÿä¸åˆé€‚ã€‚ç›´æ¥å°†post.exceptå†™å…¥åˆ°å¦‚ä¸Šçš„è¿‡æ»¤æ¡ä»¶ä¸­ã€‚

```
{% raw %}
{{ post.excerpt | content | markdownify | strip_html | truncate: 200 }}
{% endraw %}
```

æ¥ç€æˆ‘ä»¬åœ¨ _config.yml å°¾å¤„æ·»åŠ `excerpt_separator: <!--more-->`è¿›è¡Œå…¨å±€è®¾ç½®ï¼Œè¿™æ ·å°±å¥½äº†ã€‚

### further reading

æˆ‘ä»¬ä¸éœ€è¦è¿™åŠŸèƒ½ï¼Œä½†æˆ‘ä»¬ä¹Ÿä¸éœ€è¦åˆ äº†å®ƒï¼Œç”¨æ©è€³ç›—é“ƒçš„æ‰‹æ®µå°†å®ƒå±è”½æ‰ï¼Œ[CSS:è®©å…ƒç´ ä¸æ˜¾ç¤ºçš„æ–¹æ³•](https://blog.csdn.net/weixin_34326179/article/details/92425983)ã€‚çŸ¥é“æ“ä½œåï¼Œæˆ‘ä»¬åœ¨related-posts.htmlä¸­ï¼Œidä¸ºrelated-postsçš„divï¼Œå†™å…¥`style="display:none"`

### show coding

https://segmentfault.com/q/1010000005045657 ï¼Œå¦‚ä¸‹ä¾‹

```
{% raw %}
  {% if theme.related_posts.enable and (theme.related_posts.display_in_home or not is_index) %}
      {% include 'post-related.swig' with { post: post } %}
    {% endif %}
{% endraw %}
```

Jekyllä¼šå°è¯•æŠŠä»£ç å—é‡Œé¢çš„Liquidä»£ç ä¹Ÿä¸€å¹¶ç”Ÿæˆã€‚[Liquid ä¸­æ–‡å®˜æ–¹æ–‡æ¡£](https://liquid.bootcss.com/)

