!function(){class t{constructor(t,e=[],r={}){this.el=t,this.lines=Array.isArray(e)?e:[String(e||"")],this.speed=r.speed||40,this.lineDelay=r.lineDelay||300,this.index=0,this.cursorEl=r.cursorEl||null}async start(){for(let t=0;t<this.lines.length;t++)if(await this.typeLine(this.lines[t],t),t<this.lines.length-1){await this.wait(this.lineDelay);const t=document.createElement("div");t.className="post-typewriter-text-line",this.el.appendChild(t)}this.cursorEl&&this.cursorEl.classList.add("tw-cursor-blink")}typeLine(t,e=0){return new Promise(e=>{const r=document.createElement("div");r.className="post-typewriter-text-line",this.el.appendChild(r);let n=0;const i=setInterval(()=>{n<t.length?(r.textContent+=t.charAt(n),n++):(clearInterval(i),e())},this.speed)})}wait(t){return new Promise(e=>setTimeout(e,t))}}function e(t){if(!t)return null;try{const e=JSON.parse(t);if(Array.isArray(e))return e.map(String)}catch(t){}return t.split(/\r?\n|\|\|\|/).map(t=>t.trim()).filter(Boolean)}async function r(){await new Promise(t=>{const e=document.querySelector("#loading-box");if(e){const r=()=>{"none"!==e.style.display&&"0"!==e.style.opacity&&document.body.contains(e)?setTimeout(r,100):t()};r()}else"complete"===document.readyState?t():window.addEventListener("load",t)}),setTimeout(()=>{const r=document.querySelector("#post")||document.querySelector("article.post")||document.querySelector("article");if(!r)return;const n=function(){const t=document.querySelector("#post")||document.querySelector(".post")||document.querySelector("article");if(!t)return null;const r=t.getAttribute("data-typewriter");if(r)return e(r);if(window.GLOBAL_CONFIG_SITE&&window.GLOBAL_CONFIG_SITE.typewriter)return e(window.GLOBAL_CONFIG_SITE.typewriter);const n=document.querySelector('meta[name="typewriter"]');return n&&n.content?e(n.content):null}();if(!n||0===n.length)return;const i=document.createElement("div");i.className="post-typewriter-container",i.innerHTML='\n        <div class="post-typewriter-header">\n          <i class="fas fa-robot" aria-hidden="true"></i>\n          <span class="post-typewriter-title">AI 摘要</span>\n        </div>\n        <div class="post-typewriter-content">\n          <div class="post-typewriter-icon"><i class="fas fa-quote-left" aria-hidden="true"></i></div>\n          <div class="post-typewriter-text"></div>\n          <div class="post-typewriter-cursor">|</div>\n        </div>\n      ';const s=document.querySelector("#article-container")||r;s.insertBefore(i,s.firstChild);const o=i.querySelector(".post-typewriter-text"),a=i.querySelector(".post-typewriter-cursor"),l=new t(o,n,{speed:24,lineDelay:250,cursorEl:a});i.style.opacity="0",i.style.transform="translateY(12px)",setTimeout(()=>{i.style.transition="all 0.45s ease-out",i.style.opacity="1",i.style.transform="translateY(0)",setTimeout(()=>l.start(),320)},100)},1e3)}void 0!==window.pjax&&document.addEventListener("pjax:complete",r),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",r):r()}();