(()=>{class e{constructor(e,t=[],r={}){this.el=e,this.lines=Array.isArray(t)?t:[String(t||"")],this.speed=r.speed||40,this.lineDelay=r.lineDelay||300,this.index=0,this.cursorEl=r.cursorEl||null}async start(){for(let t=0;t<this.lines.length;t++){var e;await this.typeLine(this.lines[t],t),t<this.lines.length-1&&(await this.wait(this.lineDelay),(e=document.createElement("div")).className="post-typewriter-text-line",this.el.appendChild(e))}this.cursorEl&&this.cursorEl.classList.add("tw-cursor-blink")}typeLine(e,t=0){return new Promise(t=>{let r=document.createElement("div"),i=(r.className="post-typewriter-text-line",this.el.appendChild(r),0),n=setInterval(()=>{i<e.length?(r.textContent+=e.charAt(i),i++):(clearInterval(n),t())},this.speed)})}wait(e){return new Promise(t=>setTimeout(t,e))}}function t(e){if(!e)return null;try{var t=JSON.parse(e);if(Array.isArray(t))return t.map(String)}catch(e){}return e.split(/\r?\n|\|\|\|/).map(e=>e.trim()).filter(Boolean)}async function r(){await new Promise(e=>{let t=document.querySelector("#loading-box");if(t){let r=()=>{"none"!==t.style.display&&"0"!==t.style.opacity&&document.body.contains(t)?setTimeout(r,100):e()};r()}else"complete"===document.readyState?e():window.addEventListener("load",e)}),setTimeout(()=>{if(i=document.querySelector("#post")||document.querySelector("article.post")||document.querySelector("article")){var r=(r=document.querySelector("#post")||document.querySelector(".post")||document.querySelector("article"))?(r=r.getAttribute("data-typewriter"))?t(r):window.GLOBAL_CONFIG_SITE&&window.GLOBAL_CONFIG_SITE.typewriter?t(window.GLOBAL_CONFIG_SITE.typewriter):(r=document.querySelector('meta[name="typewriter"]'))&&r.content?t(r.content):null:null;if(r&&0!==r.length){let t=document.createElement("div");t.className="post-typewriter-container",t.innerHTML='\n        <div class="post-typewriter-header">\n          <i class="fas fa-robot" aria-hidden="true"></i>\n          <span class="post-typewriter-title">AI 摘要</span>\n        </div>\n        <div class="post-typewriter-content">\n          <div class="post-typewriter-icon"><i class="fas fa-quote-left" aria-hidden="true"></i></div>\n          <div class="post-typewriter-text"></div>\n          <div class="post-typewriter-cursor">|</div>\n        </div>\n      ';var i=((i=document.querySelector("#article-container")||i).insertBefore(t,i.firstChild),t.querySelector(".post-typewriter-text")),n=t.querySelector(".post-typewriter-cursor");let s=new e(i,r,{speed:24,lineDelay:250,cursorEl:n});t.style.opacity="0",t.style.transform="translateY(12px)",setTimeout(()=>{t.style.transition="all 0.45s ease-out",t.style.opacity="1",t.style.transform="translateY(0)",setTimeout(()=>s.start(),320)},100)}}},1e3)}void 0!==window.pjax&&document.addEventListener("pjax:complete",r),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",r):r()})();