let minPage=300,maxPage=350,limit=10,targetId="web_bg",isHomePage="/"===location.pathname||location.pathname.endsWith("/index.html");if(isHomePage){let e=document.getElementById(targetId);e&&(e.style.backgroundImage="url(/img/lofi-girl.png)",e.style.backgroundSize="cover",e.style.backgroundPosition="center")}else{let e=new Date,t=1e4*e.getFullYear()+100*(e.getMonth()+1)+e.getDate();fetch(`https://api.bimg.cc/all?page=${t%(maxPage-minPage+1)+minPage}&order=asc&limit=${limit}&w=1920&h=1080&mkt=zh-CN`).then(e=>e.json()).then(e=>{if(!(e=Array.isArray(e.data)?e.data:[]).length)throw new Error("图片列表为空");let t=e[Math.floor(Math.random()*e.length)].url;(e=new Image).onload=()=>{var e=document.getElementById(targetId);e&&(e.style.backgroundImage=`url(${t})`,e.style.backgroundSize="cover",e.style.backgroundPosition="center")},e.onerror=()=>{console.warn("图片加载失败，使用备用图");var e=document.getElementById(targetId);e&&(e.style.backgroundImage="url(/img/aegis.png)",e.style.backgroundSize="cover",e.style.backgroundPosition="center")},e.src=t}).catch(e=>{console.error("获取 Bing 图片失败：",e)})}