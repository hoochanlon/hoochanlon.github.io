const minPage=300,maxPage=350,limit=10,targetId="web_bg",isHomePage="/"===location.pathname||location.pathname.endsWith("/index.html");if(isHomePage){const e=document.getElementById("web_bg");e&&(e.style.backgroundImage="url(/img/aegis.png)",e.style.backgroundSize="cover",e.style.backgroundPosition="center")}else{const e=new Date,t=1e4*e.getFullYear()+100*(e.getMonth()+1)+e.getDate();fetch(`https://api.bimg.cc/all?page=${t%51+300}&order=asc&limit=10&w=1920&h=1080&mkt=zh-CN`).then(e=>e.json()).then(e=>{const t=Array.isArray(e.data)?e.data:[];if(!t.length)throw new Error("图片列表为空");const n=t[Math.floor(Math.random()*t.length)].url,o=new Image;o.onload=()=>{const e=document.getElementById("web_bg");e&&(e.style.backgroundImage=`url(${n})`,e.style.backgroundSize="cover",e.style.backgroundPosition="center")},o.onerror=()=>{console.warn("图片加载失败，使用备用图");const e=document.getElementById("web_bg");e&&(e.style.backgroundImage="url(/img/lofi-girl.png)",e.style.backgroundSize="cover",e.style.backgroundPosition="center")},o.src=n}).catch(e=>{console.error("获取 Bing 图片失败：",e)})}