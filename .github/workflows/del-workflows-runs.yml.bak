name: Delete old workflow runs
on:
  # 允许手动触发工作流
  workflow_dispatch:

jobs:
  del_runs:
    runs-on: ubuntu-latest
    permissions:
      actions: write  # 需要写权限来删除工作流记录
      contents: read  # 读取仓库内容权限
    steps:
      - name: Delete workflow runs for remote repo
        uses: Mattraks/delete-workflow-runs@v2
        with:
          token: ${{ secrets.GITHUB_TOKEN }}  # 使用GitHub Token进行身份验证
          repository: 'hoochanlon/hoochanlon.github.io'  # 替换为你的GitHub用户名和仓库
          retain_days: 1  # 保留最近 1 天的工作流记录
          keep_minimum_runs: 3  # 至少保留 3 条工作流记录
