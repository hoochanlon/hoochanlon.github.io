---
title: 测试微信图标交互
abbrlink: 64070
date: 2025-10-12 09:20:45
categories: 测试
tags: 测试
description: 由点击微信图标跳转图片连接，改为点击图标展开图片，改善交互体验。
cover: https://image.aibochinese.com/i/2025/10/13/fmahvl.jpg
---

由点击微信图标跳转图片连接，改为点击图标展开图片。

```JS
(function () {
  const container = document.querySelector('.card-info-social-icons');
  if (!container) return;

  const links = container.querySelectorAll('a');
  const insertIndex = 1; // 插入到第二个位置

  // 创建微信图标按钮
  const wechatBtn = document.createElement('a');
  wechatBtn.className = 'social-icon wechat-icon';
  wechatBtn.title = '微信';
  wechatBtn.href = 'javascript:void(0);';
  wechatBtn.innerHTML = '<i class="fab fa-weixin" style="color: #1AAD19;"></i>';
  wechatBtn.style.position = 'relative';

  // 创建弹窗元素（插入到 body，避免 overflow 限制）
  const qrPopup = document.createElement('div');
  qrPopup.className = 'wechat-qr-popup';
  qrPopup.style.cssText = `
    position: fixed;
    padding: 10px;
    background: rgba(255,255,255,0.95);
    backdrop-filter: blur(6px);
    border-radius: 8px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    display: none;
    z-index: 9999;
    transition: opacity 0.2s ease, transform 0.2s ease;
  `;
  qrPopup.innerHTML = '<img src="/img/qr.png" alt="微信二维码" style="width:120px;height:120px;">';
  document.body.appendChild(qrPopup);

  // 插入微信图标到指定位置
  if (links.length > insertIndex) {
    container.insertBefore(wechatBtn, links[insertIndex]);
  } else {
    container.appendChild(wechatBtn);
  }

  // 状态标记：是否显示弹窗
  let isVisible = false;

  // 点击图标切换弹窗显示/隐藏
  wechatBtn.addEventListener('click', function (e) {
    e.stopPropagation();
    const rect = wechatBtn.getBoundingClientRect();
    if (!isVisible) {
      qrPopup.style.left = `${rect.left + rect.width / 2}px`;
      qrPopup.style.top = `${rect.bottom + 8}px`;
      qrPopup.style.transform = 'translateX(-50%)';
      qrPopup.style.opacity = '1';
      qrPopup.style.display = 'block';
      isVisible = true;
    } else {
      qrPopup.style.display = 'none';
      qrPopup.style.opacity = '0';
      isVisible = false;
    }
  });

  // 点击空白处关闭弹窗
  document.addEventListener('click', function () {
    qrPopup.style.display = 'none';
    qrPopup.style.opacity = '0';
    isVisible = false;
  });

  // 阻止点击弹窗时关闭
  qrPopup.addEventListener('click', function (e) {
    e.stopPropagation();
  });
})();
```

在 `_config.butterfly.yml` 中该位置插入

```yml
inject:
  bottom:
```

