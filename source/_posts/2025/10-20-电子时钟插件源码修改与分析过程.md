---
title: 电子时钟插件源码修改与分析过程
noticeOutdate: false
abbrlink: 59603
date: 2025-10-20 19:19:48
categories: [折腾记录]
tags: [博客效果代码]
description:
---

### IP定位API

靠经纬度的定位是最准的，IP的定位并不准。但选对IP定位API很关键：

* https://github.com/ihmily/ip-info-api#address-1.3

### 和风天气获取天气过程

定位你的城市

```
https://api.live.bilibili.com/xlive/web-room/v1/index/getIpInfo
```

通过定位拿到你的城市，获取 location id：101250501

```
https://pp6tupe4xx.re.qweatherapi.com/geo/v2/city/lookup?location={你的城市，例如：深圳}key={你的key}
```

通过 location id 获取到天气信息

```
https://pp6tupe4xx.re.qweatherapi.com/v7/weather/now?location=101250501&key={你的key}
```

注：

* `https://pp6tupe4xx.re.qweatherapi.com`是我的和风天气 api host
* API使用方式： api host + 功能路径 + key
* 中国常见城市相关 location id 见：https://github.com/qwd/LocationList/blob/master/China-City-List-latest.csv










