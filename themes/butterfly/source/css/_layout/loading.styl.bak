// ============================================================
// Butterfly - 无白屏加载动画样式 (Stylus)
// ============================================================

#loading-box
  position fixed
  top 0
  left 0
  width 100%
  height 100%
  display flex                    // ✅ 默认显示（防白屏）
  justify-content center
  align-items center
  z-index 1001
  opacity 1
  overflow hidden
  transition opacity 0.4s ease    // ✅ 添加淡出过渡

.loading-bg
  display flex
  justify-content center
  align-items center
  width 100%
  height 100%
  position relative
  background url(/img/cloud.png) no-repeat center center
  background-size cover
  transition opacity 0.3s
  opacity 1
  z-index 1001

  // ✅ 亚克力遮罩层
  &::before
    content ''
    position absolute
    top 0
    left 0
    width 100%
    height 100%
    background rgba(250, 251, 253, 0.6)
    backdrop-filter blur(12px) saturate(180%)
    -webkit-backdrop-filter blur(12px) saturate(180%)
    border 1px solid rgba(255, 255, 255, 0.2)
    z-index 0

// ✅ 夜间模式支持
body.dark
  .loading-bg::before
    background rgba(26, 26, 26, 0.45)
    backdrop-filter blur(10px) saturate(160%)
    -webkit-backdrop-filter blur(10px) saturate(160%)
    border 1px solid rgba(255, 255, 255, 0.1)

.loading-img
  width 100px
  height 100px
  border-radius 50%
  border 4px solid #f0f0f2
  animation rotateAvatar 1.2s linear infinite
  background url(/img/avatar.png) no-repeat center center
  background-size cover
  position relative
  z-index 1

// ✅ 当 loaded 类生效时淡出隐藏
#loading-box.loaded
  opacity 0
  pointer-events none
  transition opacity 0.4s ease
  .loading-bg
    opacity 0
    z-index -1000

@keyframes rotateAvatar
  0%
    transform rotate(0deg)
  100%
    transform rotate(360deg)
